<!DOCTYPE HTML>

<html lang="it">
	<head>
		<title>Portale Stipendi</title>
		<meta charset="utf-8" />
	</head>
	<body>
		<div id="info">
			<h1>Benvenuto nel portale stipendi</h1>
			<!--<h2>Come funziona?</h2>-->
		</div>
		<div id="parametri">
			<form method="POST" action="/visualizza">
				<h2>Inserire nome e password e specificare l'operazione desiderata</h2>
				<input name="nome" maxlength="200" placeholder="Nome" required>
				<br />
				<input name="plainpass" maxlength="200" id="plain" placeholder="Password" required>
				<input name="password" id="hashed" type="hidden" required>
				<br />
				<p>Operazione: </p>
				<select id="azione" name="azione">
					<option value="Read">Lettura</option>
					<option value="Write">Modifica</option>
				</select>
				<p>Dei dati di:</p>
				<input name="nome_risorsa" maxlength="200" placeholder="Nome" required>
				<p>Eventuale nuovo importo: â‚¬</p><input id="modifica" name="nuovo_valore" type="number">
				<br /><br/>
				<input onclick="hashpass()" type="submit" value="Invia Richiesta">
			</form>
		</div>
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jsSHA/2.0.2/sha.js"></script>
		<script>
			function hashpass(){
				var pass = document.getElementById('plain');
				var hpass = document.getElementById('hashed');
				var hashObj = new jsSHA("SHA-512", "TEXT", {numRounds: 1});
				hashObj.update(hpass.value);
				var hash = hashObj.getHash("HEX");
				hpass.value = hash;
			}
		</script>
	</body>
</html>
